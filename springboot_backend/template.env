# ============================================
# Spring Boot Backend 环境变量配置模板
# ============================================
# 复制此文件为 .env 并根据实际环境修改配置值
# 注意：不要将 .env 文件提交到版本控制系统

# ============================================
# 服务器配置
# ============================================
# 应用服务端口
SERVER_PORT=8080

# 服务前置URL（应用上下文路径）
# 例如：设置为 /api 后，所有接口路径都会加上此前缀
# 如果设置为空，则不添加前缀
# 注意：如果设置了context-path，需要在路径前加上斜杠，如 /api
SERVER_CONTEXT_PATH=

# API基础路径配置（用于Controller中的@RequestMapping）
# 默认值为 /api/v1，可通过此环境变量修改
# 注意：修改此值后，需要同步更新SecurityConfig中的路径匹配规则
API_BASE_PATH=/api/v1

# ============================================
# JWT认证配置
# ============================================
# JWT签名密钥，建议至少256位（32字节），生产环境请使用强随机密钥
# 生成方式：可以使用 openssl rand -base64 32 生成
JWT_SECRET=your-secret-key-change-this-in-production-minimum-32-characters-long

# JWT Access Token过期时间（毫秒）
# 默认86400000毫秒 = 24小时
JWT_EXPIRATION_MS=86400000

# JWT Refresh Token过期时间（毫秒）
# 默认604800000毫秒 = 7天
JWT_REFRESH_EXPIRATION_MS=604800000

# ============================================
# 数据库配置
# ============================================
# 注意：Spring Boot会根据classpath中的数据库驱动自动检测数据源类型
# 不需要手动配置 spring.datasource.type
# 如需手动指定数据源实现类，使用完整的类名，如：
# SPRING_DATASOURCE_TYPE=com.zaxxer.hikari.HikariDataSource

# MySQL数据库配置
SPRING_DATASOURCE_URL=jdbc:mysql://localhost:3306/talk2me?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
SPRING_DATASOURCE_USERNAME=root
SPRING_DATASOURCE_PASSWORD=your_password_here
SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver

# H2数据库配置（开发/测试环境）
# SPRING_DATASOURCE_URL=jdbc:h2:mem:talk2me
# SPRING_DATASOURCE_USERNAME=sa
# SPRING_DATASOURCE_PASSWORD=
# SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.h2.Driver

# JPA配置
# 数据库初始化策略：none, always, embedded
SPRING_JPA_HIBERNATE_DDL_AUTO=update
# 是否显示SQL语句
SPRING_JPA_SHOW_SQL=false
# 格式化SQL输出
SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=true

# ============================================
# Redis配置（Session存储）
# ============================================
# Redis服务器地址
SPRING_DATA_REDIS_HOST=localhost
# Redis服务器端口
SPRING_DATA_REDIS_PORT=6379
# Redis密码（如无密码可留空）
SPRING_DATA_REDIS_PASSWORD=
# Redis数据库索引（默认为0）
SPRING_DATA_REDIS_DATABASE=0
# 连接超时时间（毫秒）
SPRING_DATA_REDIS_TIMEOUT=2000ms
# 连接池最大连接数
SPRING_DATA_REDIS_LETTUCE_POOL_MAX_ACTIVE=8
# 连接池最大阻塞等待时间（毫秒）
SPRING_DATA_REDIS_LETTUCE_POOL_MAX_WAIT=-1ms
# 连接池中的最大空闲连接
SPRING_DATA_REDIS_LETTUCE_POOL_MAX_IDLE=8
# 连接池中的最小空闲连接
SPRING_DATA_REDIS_LETTUCE_POOL_MIN_IDLE=0

# Session存储类型：redis, jdbc, none
SPRING_SESSION_STORE_TYPE=redis
# Session过期时间（秒）
SPRING_SESSION_TIMEOUT=1800

# ============================================
# Kafka配置
# ============================================
# Kafka服务器地址（多个地址用逗号分隔）
SPRING_KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# 消费者组ID
SPRING_KAFKA_CONSUMER_GROUP_ID=talk2me-group
# 消费者自动提交偏移量
SPRING_KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=true
# 消费者自动提交间隔（毫秒）
SPRING_KAFKA_CONSUMER_AUTO_COMMIT_INTERVAL=1000
# 消费者键反序列化器
SPRING_KAFKA_CONSUMER_KEY_DESERIALIZER=org.apache.kafka.common.serialization.StringDeserializer
# 消费者值反序列化器
SPRING_KAFKA_CONSUMER_VALUE_DESERIALIZER=org.apache.kafka.common.serialization.StringDeserializer
# 生产者键序列化器
SPRING_KAFKA_PRODUCER_KEY_SERIALIZER=org.apache.kafka.common.serialization.StringSerializer
# 生产者值序列化器
SPRING_KAFKA_PRODUCER_VALUE_SERIALIZER=org.apache.kafka.common.serialization.StringSerializer
# 生产者确认机制：0=不等待, 1=等待leader确认, all=等待所有副本确认
SPRING_KAFKA_PRODUCER_ACKS=1
# 生产者重试次数
SPRING_KAFKA_PRODUCER_RETRIES=3

# ============================================
# WebSocket配置
# ============================================
# WebSocket端点路径
WEBSOCKET_ENDPOINT=/ws
# WebSocket允许的源（CORS）
WEBSOCKET_ALLOWED_ORIGINS=*

# ============================================
# 日志配置
# ============================================
# 日志级别：TRACE, DEBUG, INFO, WARN, ERROR
LOGGING_LEVEL_ROOT=INFO
# 应用日志级别
LOGGING_LEVEL_COM_EXAMPLE_SPRINGBOOT_BACKEND=DEBUG
# 日志文件路径
LOGGING_FILE_PATH=logs/springboot_backend.log
# 日志文件最大大小
LOGGING_FILE_MAX_SIZE=10MB
# 日志文件保留天数
LOGGING_FILE_MAX_HISTORY=30

# ============================================
# 应用配置
# ============================================
# 应用名称
SPRING_APPLICATION_NAME=springboot_backend
# 应用环境：dev, test, prod
SPRING_PROFILES_ACTIVE=dev
# 文件上传最大大小
SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE=10MB
# 请求最大大小
SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE=50MB

# ============================================
# CORS跨域配置
# ============================================
# 允许的源（多个用逗号分隔）
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
# 允许的HTTP方法
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
# 允许的请求头
CORS_ALLOWED_HEADERS=*
# 是否允许携带凭证
CORS_ALLOW_CREDENTIALS=true
# 预检请求缓存时间（秒）
CORS_MAX_AGE=3600

# ============================================
# 其他配置
# ============================================
# 时区设置
TZ=Asia/Shanghai
# 字符编码
LANG=zh_CN.UTF-8
