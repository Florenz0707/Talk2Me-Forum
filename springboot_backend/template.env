# ============================================
# Spring Boot Backend 环境变量配置模板
# ============================================
# 复制此文件为 .env 并根据实际环境修改配置值
# 注意：不要将 .env 文件提交到版本控制系统

# ============================================
# 服务器配置
# ============================================
# 应用服务端口
SERVER_PORT=8080

# 服务前置URL（应用上下文路径）
# 例如：设置为 /api 后，所有接口路径都会加上此前缀
# 如果设置为空，则不添加前缀
# 注意：如果设置了context-path，需要在路径前加上斜杠，如 /api
SERVER_CONTEXT_PATH=

# API基础路径配置（用于Controller中的@RequestMapping）
# 注意：此配置需要配合代码使用，当前Controller中硬编码了 /api/v1
# 如需动态配置，需要修改Controller使用此配置值
API_BASE_PATH=/api/v1

# ============================================
# JWT认证配置
# ============================================
# JWT签名密钥，建议至少256位（32字节），生产环境请使用强随机密钥
# 生成方式：可以使用 openssl rand -base64 32 生成
JWT_SECRET=your-secret-key-change-this-in-production-minimum-32-characters-long

# JWT Access Token过期时间（毫秒）
# 默认86400000毫秒 = 24小时
JWT_EXPIRATION_MS=86400000

# JWT Refresh Token过期时间（毫秒）
# 默认604800000毫秒 = 7天
JWT_REFRESH_EXPIRATION_MS=604800000

# ============================================
# 数据库配置
# ============================================
# 注意：Spring Boot会根据classpath中的数据库驱动自动检测数据源类型
# 不需要手动配置 spring.datasource.type
# 如需手动指定数据源实现类，使用完整的类名，如：
# SPRING_DATASOURCE_TYPE=com.zaxxer.hikari.HikariDataSource

# MySQL数据库配置
SPRING_DATASOURCE_URL=jdbc:mysql://localhost:3306/talk2me?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
SPRING_DATASOURCE_USERNAME=root
SPRING_DATASOURCE_PASSWORD=your_password_here
SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver

# H2数据库配置（开发/测试环境）
# SPRING_DATASOURCE_URL=jdbc:h2:mem:talk2me
# SPRING_DATASOURCE_USERNAME=sa
# SPRING_DATASOURCE_PASSWORD=
# SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.h2.Driver

# JPA配置
# 数据库初始化策略：none, always, embedded
SPRING_JPA_HIBERNATE_DDL_AUTO=update
# 是否显示SQL语句
SPRING_JPA_SHOW_SQL=false
# 格式化SQL输出
SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL=true

# H2控制台配置
# 注意：pom.xml中已包含h2依赖
# 是否启用H2控制台（仅开发环境建议启用）
# 当前application.properties中默认设置为false（生产环境安全配置）
SPRING_H2_CONSOLE_ENABLED=false
# H2控制台访问路径
SPRING_H2_CONSOLE_PATH=/h2-console
# 是否允许远程访问H2控制台（生产环境必须设置为false）
SPRING_H2_CONSOLE_WEB_ALLOW_OTHERS=false

# ============================================
# Redis配置
# ============================================
# 注意：当前pom.xml中未包含spring-boot-starter-session-data-redis依赖
# 应用使用无状态JWT认证，不需要Spring Session
# 如果将来需要使用Redis（如缓存、消息队列等），可以取消注释以下配置
# Redis服务器地址
# SPRING_DATA_REDIS_HOST=localhost
# Redis服务器端口
# SPRING_DATA_REDIS_PORT=6379
# Redis密码（如无密码可留空）
# SPRING_DATA_REDIS_PASSWORD=
# Redis数据库索引（默认为0）
# SPRING_DATA_REDIS_DATABASE=0
# 连接超时时间（毫秒）
# SPRING_DATA_REDIS_TIMEOUT=2000ms
# 连接池最大连接数
# SPRING_DATA_REDIS_LETTUCE_POOL_MAX_ACTIVE=8
# 连接池最大阻塞等待时间（毫秒）
# SPRING_DATA_REDIS_LETTUCE_POOL_MAX_WAIT=-1ms
# 连接池中的最大空闲连接
# SPRING_DATA_REDIS_LETTUCE_POOL_MAX_IDLE=8
# 连接池中的最小空闲连接
# SPRING_DATA_REDIS_LETTUCE_POOL_MIN_IDLE=0

# Session配置
# 注意：应用使用无状态JWT认证（SessionCreationPolicy.STATELESS），不需要Spring Session
# 如果需要使用Spring Session，请取消注释pom.xml中的spring-boot-starter-session-data-redis依赖
# Session存储类型：redis, jdbc, none
# SPRING_SESSION_STORE_TYPE=none
# Session过期时间（秒）
# SPRING_SESSION_TIMEOUT=1800

# ============================================
# Kafka配置
# ============================================
# 注意：当前pom.xml中spring-boot-starter-kafka依赖已被注释
# 如果需要使用Kafka，请取消注释pom.xml中的依赖，然后取消注释以下配置
# Kafka服务器地址（多个地址用逗号分隔）
# SPRING_KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# 消费者组ID
# SPRING_KAFKA_CONSUMER_GROUP_ID=talk2me-group
# 消费者自动提交偏移量
# SPRING_KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=true
# 消费者自动提交间隔（毫秒）
# SPRING_KAFKA_CONSUMER_AUTO_COMMIT_INTERVAL=1000
# 消费者键反序列化器
# SPRING_KAFKA_CONSUMER_KEY_DESERIALIZER=org.apache.kafka.common.serialization.StringDeserializer
# 消费者值反序列化器
# SPRING_KAFKA_CONSUMER_VALUE_DESERIALIZER=org.apache.kafka.common.serialization.StringDeserializer
# 生产者键序列化器
# SPRING_KAFKA_PRODUCER_KEY_SERIALIZER=org.apache.kafka.common.serialization.StringSerializer
# 生产者值序列化器
# SPRING_KAFKA_PRODUCER_VALUE_SERIALIZER=org.apache.kafka.common.serialization.StringSerializer
# 生产者确认机制：0=不等待, 1=等待leader确认, all=等待所有副本确认
# SPRING_KAFKA_PRODUCER_ACKS=1
# 生产者重试次数
# SPRING_KAFKA_PRODUCER_RETRIES=3

# ============================================
# WebSocket配置
# ============================================
# WebSocket端点路径
WEBSOCKET_ENDPOINT=/ws
# WebSocket允许的源（CORS）
WEBSOCKET_ALLOWED_ORIGINS=*

# ============================================
# 日志配置
# ============================================
# 日志级别：TRACE, DEBUG, INFO, WARN, ERROR
LOGGING_LEVEL_ROOT=INFO
# 应用日志级别
LOGGING_LEVEL_COM_EXAMPLE_SPRINGBOOT_BACKEND=DEBUG
# Tomcat APR native库加载失败的警告级别（可选性能优化，不影响功能）
LOGGING_LEVEL_APR=WARN
# HandlerMappingIntrospector缓存未命中的警告级别（首次请求时的正常行为）
LOGGING_LEVEL_HANDLER_MAPPING=INFO
# 日志文件路径
LOGGING_FILE_PATH=logs
# 日志文件名称
LOGGING_FILE_NAME=logs/springboot_backend.log
# 日志文件最大大小
LOGGING_FILE_MAX_SIZE=10MB
# 日志文件保留天数
LOGGING_FILE_MAX_HISTORY=30

# ============================================
# Spring Boot Actuator配置
# ============================================
# 注意：pom.xml中已包含spring-boot-starter-actuator依赖
# Actuator端点基础路径
MANAGEMENT_ENDPOINTS_WEB_BASE_PATH=/actuator
# 暴露的端点（开发环境可以暴露更多，生产环境应该限制）
# 可用端点：health,info,env,metrics,beans,configprops,httptrace,loggers,shutdown等
# 生产环境建议只暴露：health,info
# 当前application.properties中设置为：health,info（生产环境安全配置）
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info
# 启用健康检查端点详细信息（when-authorized:需要认证, always:总是显示, never:从不显示）
# 当前application.properties中设置为：never（生产环境安全配置）
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=never
# Actuator端点端口（默认与server.port相同，留空表示使用server.port）
# MANAGEMENT_SERVER_PORT=

# ============================================
# 应用配置
# ============================================
# 应用名称
SPRING_APPLICATION_NAME=springboot_backend
# 应用环境：dev, test, prod
SPRING_PROFILES_ACTIVE=dev
# 文件上传最大大小
SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE=10MB
# 请求最大大小
SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE=50MB

# ============================================
# CORS跨域配置
# ============================================
# 允许的源（多个用逗号分隔）
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
# 允许的HTTP方法
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
# 允许的请求头
CORS_ALLOWED_HEADERS=*
# 是否允许携带凭证
CORS_ALLOW_CREDENTIALS=true
# 预检请求缓存时间（秒）
CORS_MAX_AGE=3600

# ============================================
# 其他配置
# ============================================
# 时区设置
TZ=Asia/Shanghai
# 字符编码
LANG=zh_CN.UTF-8
